<div class="build-order-panel margin no-margin-top" #divToScroll>
  <div>
    <mat-tab-group dynamicHeight [selectedIndex]="selected.value" (selectedIndexChange)="selected.setValue($event)" class="build-order-tabs">
      <mat-tab label="Choose build order">
        <div>
          <app-choose-build-order></app-choose-build-order>
        </div>
      </mat-tab>
      <mat-tab label="Plan">
        <div>
          <div *ngIf="buildOrderService.selectedBuildOrder">
            <h3 class="selected-build-order padding">{{buildOrderService.selectedBuildOrder.name}}</h3>

            <ul class="build-order-steps">
              <li class="build-order-step" [ngClass]="{'build-order-step': true, 'is-age-up': step.isAgeUp}" [appBuildOrderTarget] [idealTime]="step.idealTimeInSeconds"
                attr.data-scroll-to-seconds="{{step.idealTimeInSeconds}}"
                *ngFor="let step of buildOrderService.selectedBuildOrder.steps">
                <div class="villager-count">{{step.villagerCount}}</div>
                <div class="step-details">
                  <p class="details">{{step.details}}</p>
                  <div *ngIf="step.footnotes">
                    <p class="footnote" *ngFor="let footnote of step.footnotes">&rarr; {{footnote}}</p>
                  </div>
                </div>
              </li>
            </ul>

            <div class="final-tips" *ngIf="buildOrderService.selectedBuildOrder.finalTips">
              <h4>Final tips</h4>
              <p>{{buildOrderService.selectedBuildOrder.finalTips}}</p>
              <p *ngIf="!buildOrderService.selectedBuildOrder.hideOnYourOwn">But now...</p>
              <p *ngIf="!buildOrderService.selectedBuildOrder.hideOnYourOwn"><strong>YOU'RE ON YOUR OWN!</strong></p>
            </div>
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>

</div>